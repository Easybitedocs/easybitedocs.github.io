"use strict";(self.webpackChunkeasybitedocs=self.webpackChunkeasybitedocs||[]).push([[178],{8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>c});var r=n(6540);const t={},i=r.createContext(t);function l(e){const s=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(i.Provider,{value:s},e.children)}},8957:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>a,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"libraries/requester","title":"Requester Library Reference","description":"The requester library (also known as the HTTP fetcher) brings full HTTP client capabilities into EasyBite. With just a few calls you can:","source":"@site/docs/libraries/requester.md","sourceDirName":"libraries","slug":"/libraries/requester","permalink":"/libraries/requester","draft":false,"unlisted":false,"editUrl":"https://github.com/Easybitedocs/easybitedocs.github.io/tree/main/docs/libraries/requester.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Socket Library Reference","permalink":"/libraries/socket"},"next":{"title":"Listener Library Reference","permalink":"/libraries/listener"}}');var t=n(4848),i=n(8453);const l={},c="Requester Library Reference",d={},o=[{value:"Importing",id:"importing",level:2},{value:"Available Functions",id:"available-functions",level:2},{value:"Detailed Explanation",id:"detailed-explanation",level:2},{value:"Examples",id:"examples",level:2},{value:"Conclusion",id:"conclusion",level:2}];function h(e){const s={br:"br",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"requester-library-reference",children:"Requester Library Reference"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"requester"})," library (also known as the HTTP fetcher) brings full HTTP client capabilities into EasyBite. With just a few calls you can:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Connect"})," to a base URL and keep a shared HTTP client"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Perform"})," GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS requests"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Customize"})," timeouts, headers, query parameters, request bodies"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Manage"})," cookies in a simple in\u2011memory jar"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Parse"})," JSON or retrieve plain text responses"]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"importing",children:"Importing"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"import requester\r\n\r\n// or select specific functions\r\nfrom requester import connect, get, post, request, getjson\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"available-functions",children:"Available Functions"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Function"}),(0,t.jsx)(s.th,{children:"Parameters"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"connect(base_url)"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"base_url"})," (String)"]}),(0,t.jsx)(s.td,{children:"Create and store a shared HTTP client, set the default base URL."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"settimeout([client,] s)"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"client"})," (HTTPClient, optional), ",(0,t.jsx)(s.code,{children:"s"})," (Number seconds)"]}),(0,t.jsx)(s.td,{children:"Update the request timeout. If no client passed, updates the last one."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"request([client,] method, [url], [body], [options])"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"method"})," (String), ",(0,t.jsx)(s.code,{children:"url"})," (String, optional), ",(0,t.jsx)(s.code,{children:"body"})," (String, optional), ",(0,t.jsx)(s.code,{children:"options"})," (Dictionary, optional)"]}),(0,t.jsxs)(s.td,{children:["Make a generic HTTP request. Options can include ",(0,t.jsx)(s.code,{children:'"headers"'})," or ",(0,t.jsx)(s.code,{children:'"params"'})," dictionaries."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"get([client,] [url], [options])"})}),(0,t.jsxs)(s.td,{children:["like ",(0,t.jsx)(s.code,{children:"request"})," with ",(0,t.jsx)(s.code,{children:'method="GET"'})]}),(0,t.jsx)(s.td,{children:"Convenience for GET requests."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"post([client,] [url], body, [options])"})}),(0,t.jsxs)(s.td,{children:["like ",(0,t.jsx)(s.code,{children:"request"})," with ",(0,t.jsx)(s.code,{children:'method="POST"'})]}),(0,t.jsx)(s.td,{children:"Convenience for POST."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"put([client,] [url], body, [options])"})}),(0,t.jsx)(s.td,{children:"like above"}),(0,t.jsx)(s.td,{children:"Convenience for PUT."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"delete([client,] [url], [options])"})}),(0,t.jsx)(s.td,{children:"like above"}),(0,t.jsx)(s.td,{children:"Convenience for DELETE."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"head([client,] [url], [options])"})}),(0,t.jsx)(s.td,{children:"like above"}),(0,t.jsx)(s.td,{children:"Convenience for HEAD."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"patch([client,] [url], body, [options])"})}),(0,t.jsx)(s.td,{children:"like above"}),(0,t.jsx)(s.td,{children:"Convenience for PATCH."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"options([client,] [url], [options])"})}),(0,t.jsx)(s.td,{children:"like above"}),(0,t.jsx)(s.td,{children:"Convenience for OPTIONS."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"getresponse([client,] [url_or_response])"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"client"})," (optional), ",(0,t.jsx)(s.code,{children:"url_or_response"})," (String or existing response Dict)"]}),(0,t.jsxs)(s.td,{children:["Return a full response dictionary with keys ",(0,t.jsx)(s.code,{children:'"status"'}),", ",(0,t.jsx)(s.code,{children:'"headers"'}),", ",(0,t.jsx)(s.code,{children:'"body"'}),"."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"getjson([client,] [url_or_response], [options])"})}),(0,t.jsxs)(s.td,{children:["as ",(0,t.jsx)(s.code,{children:"getresponse"}),", but parses ",(0,t.jsx)(s.code,{children:'"body"'})," as JSON and returns a Value tree."]}),(0,t.jsx)(s.td,{children:"Fetch and parse JSON in one call."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"gettext([client,] [url_or_response], [options])"})}),(0,t.jsxs)(s.td,{children:["as ",(0,t.jsx)(s.code,{children:"getresponse"})," but returns the ",(0,t.jsx)(s.code,{children:'"body"'})," string."]}),(0,t.jsx)(s.td,{children:"Fetch plain text."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"setcookie(name, value)"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"name"}),", ",(0,t.jsx)(s.code,{children:"value"})," (Strings)"]}),(0,t.jsx)(s.td,{children:"Store a cookie in the global jar."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"getcookies()"})}),(0,t.jsx)(s.td,{children:"\u2014"}),(0,t.jsx)(s.td,{children:"Return a dictionary of all stored cookies."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"clearcookies()"})}),(0,t.jsx)(s.td,{children:"\u2014"}),(0,t.jsx)(s.td,{children:"Remove all cookies from the jar."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"close([client])"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"client"})," (optional)"]}),(0,t.jsx)(s.td,{children:"Drop the given or last HTTP client."})]})]})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"detailed-explanation",children:"Detailed Explanation"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Connecting"}),(0,t.jsx)(s.br,{}),"\n","Use ",(0,t.jsx)(s.code,{children:'requester.connect("https://api.example.com")'})," to create a long\u2011lived HTTP client and set a default base URL. Subsequent calls to ",(0,t.jsx)(s.code,{children:"get"}),", ",(0,t.jsx)(s.code,{children:"post"}),", or the generic ",(0,t.jsx)(s.code,{children:"request"})," will resolve relative paths against this base\u2014no need to repeat the domain."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Timeouts"}),(0,t.jsx)(s.br,{}),"\n","By default, the client uses a standard timeout. Call ",(0,t.jsx)(s.code,{children:"requester.settimeout(10)"})," (seconds) or ",(0,t.jsx)(s.code,{children:"requester.settimeout(client, 30)"})," to adjust it globally or per\u2011client."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Making Requests"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Generic"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:'set resp to requester.request("POST", "/users", "{\\"name\\":\\"Alice\\"}", {"headers": {"Content-Type":"application/json"}})\n'})}),"\n",(0,t.jsxs)(s.p,{children:["The generic ",(0,t.jsx)(s.code,{children:"request"})," takes:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["method (e.g. ",(0,t.jsx)(s.code,{children:'"GET"'}),", ",(0,t.jsx)(s.code,{children:'"PUT"'}),")"]}),"\n",(0,t.jsx)(s.li,{children:"URL (absolute or relative)"}),"\n",(0,t.jsx)(s.li,{children:"optional body string"}),"\n",(0,t.jsxs)(s.li,{children:["optional options dict with ",(0,t.jsx)(s.code,{children:'"headers"'})," and/or ",(0,t.jsx)(s.code,{children:'"params"'})," (for query string on GET)"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Convenience"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:'set r1 to requester.get("/items", {"params": {"page":"2"}})\r\nset r2 to requester.post("/login", "{\\"user\\":\\"bob\\"}", {"headers": {"Accept":"application/json"}})\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Inspecting Responses"}),(0,t.jsx)(s.br,{}),"\n","All requests return a ",(0,t.jsx)(s.strong,{children:"dictionary"})," with:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:'"status"'})," \u2192 HTTP status code (Number)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:'"headers"'})," \u2192 a dictionary of header\u2011name \u2192 header\u2011value (String)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:'"body"'}),"   \u2192 response body (String)"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Example:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:'set resp to requester.getresponse("https://httpbin.org/get")\r\nshow(resp["status"])        // e.g. 200\r\nshow(resp["headers"]["Content-Type"])\r\nshow(resp["body"])          // raw JSON text\n'})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Parsing JSON"}),(0,t.jsx)(s.br,{}),"\n","To immediately parse JSON into EasyBite values:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:'set data to requester.getjson("https://api.example.com/data")\r\n// `data` is now a nested structure of dictionaries, arrays, numbers, and strings\r\nshow(data["items"][0]["name"])\n'})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Cookies"}),(0,t.jsx)(s.br,{}),"\n","Manage cookies automatically with:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:'set _ to requester.setcookie("session", "abc123")\r\nset all to requester.getcookies()\r\nshow(all)\r\nset _ to requester.clearcookies()\n'})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Closing"}),(0,t.jsx)(s.br,{}),"\n","When you\u2019re done, drop the client to free resources:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"set _ to requester.close()\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:'import requester\r\n\r\n// 1. Connect and GET\r\nset client to requester.connect("https://httpbin.org")\r\nset resp to requester.get(client, "/get", {"params": {"foo":"bar"}})\r\nshow(resp["status"])            // 200\r\nshow(resp["body"])              // JSON text\r\n\r\n// 2. Parse JSON\r\nset json to requester.getjson(client, "/get")\r\nshow(json["args"]["foo"])       // "bar"\r\n\r\n// 3. POST with headers\r\nset resp2 to requester.post(client, "/post", "{\\"x\\":1}", {"headers":{"Content-Type":"application/json"}})\r\nshow(resp2["status"])\r\nshow(resp2["body"])\r\n\r\n// 4. Timeout example\r\nset _ to requester.settimeout(client, 5)\r\n// will error if server takes >5s\r\n\r\n// 5. Cookies\r\nset _ to requester.setcookie("token","xyz")\r\nset ck to requester.getcookies()\r\nshow(ck["token"])               // "xyz"\r\nset _ to requester.clearcookies()\r\n\r\n// 6. Close when done\r\nset _ to requester.close(client)\n'})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"requester"})," module makes HTTP in EasyBite:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Simple to import"})," (",(0,t.jsx)(s.code,{children:"import requester"}),"),"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Flexible"})," (generic ",(0,t.jsx)(s.code,{children:"request"})," plus convenience methods),"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Powerful"})," (timeout, headers, query params, cookies, JSON parsing)."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Combine these calls with EasyBite\u2019s control flow (",(0,t.jsx)(s.code,{children:"repeat while \u2026 end repeat"}),") to build scripts, API clients, or even small web\u2011crawlers entirely in EasyBite."]})]})}function a(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);